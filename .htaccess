# ----------------------------------------------------------------------
# Gzip compression by one.com
# ----------------------------------------------------------------------

<IfModule mod_deflate.c>

  # Force deflate for mangled headers developer.yahoo.com/blogs/ydn/posts/2010/12/pushing-beyond-gzipping/
  <IfModule mod_setenvif.c>
    <IfModule mod_headers.c>
      SetEnvIfNoCase ^(Accept-EncodXng|X-cept-Encoding|X{15}|~{15}|-{15})$ ^((gzip|deflate)\s*,?\s*)+|[X~-]{4,13}$ HAVE_Accept-Encoding
      RequestHeader append Accept-Encoding "gzip,deflate" env=HAVE_Accept-Encoding
    </IfModule>
  </IfModule>

  <IfModule mod_filter.c>
    AddOutputFilterByType DEFLATE application/atom+xml \
                                  application/javascript \
                                  application/json \
                                  application/rss+xml \
                                  application/vnd.ms-fontobject \
                                  application/x-font-ttf \
                                  application/xhtml+xml \
                                  application/xml \
                                  font/opentype \
                                  image/svg+xml \
                                  image/x-icon \
                                  text/css \
                                  text/html \
                                  text/plain \
                                  text/x-component \
                                  text/xml
  </IfModule>

</IfModule>

<IfModule mod_expires.c>
  ExpiresActive on
  ExpiresDefault                          "access plus 1 month"
  ExpiresByType text/html                 "access plus 0 seconds"
  ExpiresByType application/json          "access plus 0 seconds"
  ExpiresByType image/png                 "access 1 year"
  ExpiresByType image/jpeg                "access 1 year"
  ExpiresByType text/css                  "access plus 1 year"
  ExpiresByType application/javascript    "access plus 1 year"
</IfModule>

<If " %{ENV:G1_RUNTIME} == 'static'">
        <If " -d %{REQUEST_FILENAME} || %{REQUEST_FILENAME} =~ /.*\.php$/">
                Require all denied
        </If>
</If>

# Serve index.html as the default page (replaces WordPress)
DirectoryIndex index.html

<IfModule mod_rewrite.c>
RewriteEngine On

# Let real files and directories through (assets, license/, releases/)
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Allow license server API
RewriteRule ^license/ - [L]

# Allow releases directory
RewriteRule ^releases/ - [L]

# Everything else â†’ index.html
RewriteRule ^ /index.html [L]
</IfModule>

#one.com block xmlrpc
<Files xmlrpc.php>
order deny,allow
deny from all
</Files>
#one.com block xmlrpc END
